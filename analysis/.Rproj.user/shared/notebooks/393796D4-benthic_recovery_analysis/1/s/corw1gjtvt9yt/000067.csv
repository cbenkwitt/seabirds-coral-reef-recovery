"0",""
"0","#make community matrix:"
"0","uvc_dat_group_isl_wide_sp<-"
"0","  uvc_dat_group_isl_wide %>%"
"0","  select(-c(Year, Atoll, Island, Treatment)) %>%"
"0","  rename_with(~str_remove(., 'Mean_'))"
"0",""
"0","##Run NMDS-----"
"0","nmds_benthic_broad =metaMDS(uvc_dat_group_isl_wide_sp, trymax=50, k=2, autotransform=FALSE, distance = ""bray"")"
"1","Run 0 stress"
"1"," "
"1","0.1737016"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","1"
"1"," "
"1","stress"
"1"," "
"1","0.1743796"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","2"
"1"," "
"1","stress"
"1"," "
"1","0.1682715"
"1"," "
"1","
"
"1","... New best solution
"
"1","... Procrustes: rmse"
"1"," "
"1","0.08186457"
"1"," "
"1"," max resid"
"1"," "
"1","0.3538355"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","3"
"1"," "
"1","stress"
"1"," "
"1","0.1739724"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","4"
"1"," "
"1","stress"
"1"," "
"1","0.1739725"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","5"
"1"," "
"1","stress"
"1"," "
"1","0.1593766"
"1"," "
"1","
"
"1","... New best solution
"
"1","... Procrustes: rmse"
"1"," "
"1","0.04378206"
"1"," "
"1"," max resid"
"1"," "
"1","0.1930969"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","6"
"1"," "
"1","stress"
"1"," "
"1","0.1666943"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","7"
"1"," "
"1","stress"
"1"," "
"1","0.1593766"
"1"," "
"1","
"
"1","... New best solution
"
"1","... Procrustes: rmse"
"1"," "
"1","1.523178e-05"
"1"," "
"1"," max resid"
"1"," "
"1","4.318593e-05"
"1"," "
"1","
"
"1","... Similar to previous best
"
"1","Run"
"1"," "
"1","8"
"1"," "
"1","stress"
"1"," "
"1","0.1593766"
"1"," "
"1","
"
"1","... Procrustes: rmse"
"1"," "
"1","3.291523e-05"
"1"," "
"1"," max resid"
"1"," "
"1","0.0001282332"
"1"," "
"1","
"
"1","... Similar to previous best
"
"1","Run"
"1"," "
"1","9"
"1"," "
"1","stress"
"1"," "
"1","0.177189"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","10"
"1"," "
"1","stress"
"1"," "
"1","0.177189"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","11"
"1"," "
"1","stress"
"1"," "
"1","0.2131613"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","12"
"1"," "
"1","stress"
"1"," "
"1","0.1666944"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","13"
"1"," "
"1","stress"
"1"," "
"1","0.1743796"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","14"
"1"," "
"1","stress"
"1"," "
"1","0.1737016"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","15"
"1"," "
"1","stress"
"1"," "
"1","0.1666943"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","16"
"1"," "
"1","stress"
"1"," "
"1","0.1682717"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","17"
"1"," "
"1","stress"
"1"," "
"1","0.177189"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","18"
"1"," "
"1","stress"
"1"," "
"1","0.177189"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","19"
"1"," "
"1","stress"
"1"," "
"1","0.1666944"
"1"," "
"1","
"
"1","Run"
"1"," "
"1","20"
"1"," "
"1","stress"
"1"," "
"1","0.1743796"
"1"," "
"1","
"
"1","*** Solution reached
"
"0","#note: autotransform=FALSE to keep consistent with GCB paper"
"0",""
"0","nmds_benthic_broad$stress # stress = 0.1593766"
"1","[1]"
"1"," 0.1593766"
"1","
"
"0","##Extract site and nmds_spp and ggplot--------"
"0","spp.sc <- scores(nmds_benthic_broad, display = ""species"", shrink = FALSE) "
"0","spp.sc"
"1","             "
"1","       NMDS1"
"1","       NMDS2"
"1","
Other_Benthos"
"1"," -0.27950342"
"1"," -0.60791147"
"1","
Sand         "
"1","  0.15073319"
"1","  0.08488056"
"1","
Soft_coral   "
"1"," -0.48174057"
"1","  0.11229996"
"1","
Sponge       "
"1"," -0.24850709"
"1","  0.09657996"
"1","
Rubble       "
"1"," -0.04222506"
"1"," -0.59276642"
"1","
Halimeda     "
"1"," -0.97669608"
"1","  0.18855967"
"1","
Hard_coral   "
"1","  0.26433813"
"1","  0.48018312"
"1","
CCA          "
"1"," -0.62385023"
"1","  0.04069671"
"1","
Pavement     "
"1","  0.21196256"
"1"," -0.19047456"
"1","
"
"0","site.sc <- scores(nmds_benthic_broad, display = ""sites"", shrink = FALSE) "
"0","site.sc"
"1","  "
"1","       NMDS1"
"1","       NMDS2"
"1","
1 "
"1"," -0.13657350"
"1"," -0.08044231"
"1","
2 "
"1"," -0.02392475"
"1"," -0.01804811"
"1","
3 "
"1","  0.07347376"
"1"," -0.01462176"
"1","
4 "
"1","  0.38190286"
"1","  0.34012571"
"1","
5 "
"1","  0.39930000"
"1","  0.19002359"
"1","
6 "
"1","  0.17041824"
"1","  0.03416880"
"1","
7 "
"1","  0.24846649"
"1"," -0.08927212"
"1","
8 "
"1","  0.13338846"
"1"," -0.09895184"
"1","
9 "
"1"," -0.23777513"
"1","  0.10634142"
"1","
10"
"1","  0.26953392"
"1"," -0.31856153"
"1","
11"
"1","  0.40128445"
"1","  0.09974084"
"1","
12"
"1","  0.45631022"
"1"," -0.32512520"
"1","
13"
"1"," -0.79478663"
"1"," -0.36949538"
"1","
14"
"1","  0.22628985"
"1"," -0.36758337"
"1","
15"
"1","  0.20692697"
"1","  0.45062503"
"1","
16"
"1","  0.39150518"
"1"," -0.04335448"
"1","
17"
"1"," -1.17306893"
"1","  0.11944851"
"1","
18"
"1"," -0.23389663"
"1"," -0.17692628"
"1","
19"
"1"," -0.87190986"
"1","  0.28662880"
"1","
20"
"1","  0.09555528"
"1"," -0.35312748"
"1","
21"
"1","  0.32779028"
"1","  0.31971526"
"1","
22"
"1"," -0.38540196"
"1"," -0.01897155"
"1","
23"
"1"," -0.02236426"
"1","  0.05679149"
"1","
24"
"1"," -0.27331093"
"1"," -0.31892167"
"1","
25"
"1","  0.46062073"
"1"," -0.26302767"
"1","
26"
"1","  0.18353882"
"1","  0.72133600"
"1","
27"
"1","  0.16903211"
"1","  0.63136818"
"1","
28"
"1"," -0.51126927"
"1","  0.06251307"
"1","
29"
"1","  0.24735715"
"1"," -0.18789227"
"1","
30"
"1"," -0.17793324"
"1"," -0.71717403"
"1","
31"
"1"," -0.35894459"
"1","  0.67657728"
"1","
32"
"1","  0.06357392"
"1"," -0.67624771"
"1","
33"
"1","  0.14471169"
"1","  0.39234883"
"1","
34"
"1","  0.15017928"
"1"," -0.05000805"
"1","
"
"0","#merge site.sc with metadata from dataframe"
"0","#need combo column: "
"0","uvc_dat_group_isl_wide_ty<-"
"0","  uvc_dat_group_isl_wide %>%"
"0","  unite(""Treatment_Year"", c(Treatment, Year), remove = FALSE)%>%"
"0","  relocate(Treatment_Year, .after = Treatment)"
"0",""
"0","nmds_benthic_broad_site_scores<-"
"0","  bind_cols(uvc_dat_group_isl_wide_ty[1:5],"
"0","                    as_tibble(site.sc))"
"0",""
"0","#extract species scores"
"0","species.scores <- as.data.frame(scores(nmds_benthic_broad, ""species""))  #Using the scores function from vegan to extract the species scores and convert to a data.frame"
"0","species.scores<-"
"0","  species.scores%>%"
"0","  rownames_to_column(var=""Species"") # create a column of species, from the rownames of species.scores"
"0","head(species.scores)  #look at the data"
